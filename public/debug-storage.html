<!DOCTYPE html>
<html>
<head>
  <title>Debug LocalStorage</title>
  <style>
    body { background: #1a1a1a; color: white; padding: 20px; font-family: monospace; }
    pre { background: #2a2a2a; padding: 20px; border-radius: 8px; overflow-x: auto; }
    button { padding: 10px 20px; margin: 10px 5px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
    button.danger { background: #f44336; }
    .info { background: #333; padding: 15px; border-radius: 4px; margin: 20px 0; }
  </style>
</head>
<body>
  <h1>LocalStorage Debugger</h1>

  <div class="info">
    <p><strong>Purpose:</strong> This page shows what's stored in localStorage for the Slay the Spire tracker.</p>
    <p>If you're seeing black boxes for starter cards/relics, the stored data might have incorrect image references.</p>
  </div>

  <button onclick="showStorage()">Refresh Storage View</button>
  <button class="danger" onclick="clearStorage()">Clear All Storage (This will reset your run!)</button>

  <h2>Stored Data:</h2>
  <pre id="output">Click "Refresh Storage View" to see data...</pre>

  <script>
    function showStorage() {
      const key = 'sts-run-tracker';
      const data = localStorage.getItem(key);
      const output = document.getElementById('output');

      if (!data) {
        output.textContent = 'No stored data found for key: ' + key;
        return;
      }

      try {
        const parsed = JSON.parse(data);
        output.textContent = JSON.stringify(parsed, null, 2);

        // Show specific info about deck and relics
        if (parsed.state) {
          console.log('Deck:', parsed.state.deck);
          console.log('Relics:', parsed.state.relics);
          console.log('Character:', parsed.state.character);
        }
      } catch (e) {
        output.textContent = 'Error parsing data: ' + e.message + '\n\nRaw data:\n' + data;
      }
    }

    function clearStorage() {
      if (confirm('This will delete all stored run data. Are you sure?')) {
        localStorage.clear();
        alert('Storage cleared! Refresh the main app to start fresh.');
        showStorage();
      }
    }

    // Auto-load on page load
    showStorage();
  </script>
</body>
</html>
